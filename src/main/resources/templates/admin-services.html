<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–£—Å–ª—É–≥–∏ –∑–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ | AgroDirect</title>
    <link rel="stylesheet" th:href="@{/vendors/bootstrap/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/my-services.css}" />

    <th:block th:replace="fragments/head-links :: headLinks"></th:block>
    <link rel="stylesheet" href="/vendors/fontawesome/css/all.min.css" />
</head>
<body>


<div class="page-wrapper">

    <div th:replace="~{fragments/header :: siteHeader}"></div>

    <section class="container mt-5">
        <h2 class="mb-4 text-center">–£—Å–ª—É–≥–∏, —á–∞–∫–∞—â–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ</h2>

        <!-- –£—Å–ø–µ—à–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ -->
        <div th:if="${successMessage}" class="alert alert-success text-center" th:text="${successMessage}"></div>

        <!-- –ê–∫–æ –Ω—è–º–∞ —É—Å–ª—É–≥–∏ -->
        <div th:if="${allServices.isEmpty()}">
            <p class="text-center">–ù—è–º–∞ —É—Å–ª—É–≥–∏, —á–∞–∫–∞—â–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ.</p>
        </div>

        <!-- –ö–∞—Ä—Ç–∞ –Ω–∞ –≤—Å—è–∫–∞ —É—Å–ª—É–≥–∞ -->
        <div th:each="service : ${allServices}" class="card mb-4 shadow-sm">
            <div class="row g-0">
                <!-- –°–Ω–∏–º–∫–∞ -->
                <div class="col-md-4">
                    <img th:src="@{${service.imageUrl}}" class="img-fluid rounded-start h-100 object-fit-cover" alt="–°–Ω–∏–º–∫–∞ –Ω–∞ —É—Å–ª—É–≥–∞">
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="col-md-8">
                    <div class="card-body d-flex flex-column justify-content-between h-100">
                        <div>
                            <h5 class="card-title" th:text="${service.title}">–ó–∞–≥–ª–∞–≤–∏–µ</h5>
                            <p class="card-text"><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> <span th:text="${service.category.displayName}"></span></p>
                            <p class="card-text"><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span th:text="${#strings.abbreviate(service.description, 120)}"></span></p>
                            <p class="card-text"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span th:text="${service.phoneNumber}"></span></p>
                            <p class="card-text"><strong>–§–µ—Ä–º–µ—Ä:</strong> <span th:text="${service.farmerName}"></span></p>
                            <p class="card-text">
                                <strong>–°—Ç–∞—Ç—É—Å:</strong>
                                <span th:classappend="${service.approved} ? 'badge bg-success' : 'badge bg-warning text-dark'"
                                      th:text="${service.approved} ? '–û–¥–æ–±—Ä–µ–Ω–∞' : '–ß–∞–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ'">–°—Ç–∞—Ç—É—Å</span>
                            </p>
                        </div>

                        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
                        <div class="mt-3">
                            <form th:action="@{'/admin/service/approve/' + ${service.id}}" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-outline-success btn-sm me-2">‚úÖ –û–¥–æ–±—Ä–∏</button>
                            </form>

                            <form th:action="@{'/admin/service/delete/' + ${service.id}}" method="post"
                                  onsubmit="return confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —Ç–∞–∑–∏ —É—Å–ª—É–≥–∞?');"
                                  style="display:inline;">
                                <button type="submit" class="btn btn-outline-danger btn-sm">üóëÔ∏è –ò–∑—Ç—Ä–∏–π</button>
                            </form>

                            <a th:href="@{/services/{id}(id=${service.id})}" class="btn btn-outline-primary btn-sm">
                                –ü—Ä–µ–≥–ª–µ–¥
                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div th:replace="~{fragments/footer :: footer}"></div>
</div>

</body>
</html>
